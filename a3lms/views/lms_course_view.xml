<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="view_course_form" model="ir.ui.view">
			<field name="name">a3lms.course.form</field>
			<field name="model">a3lms.course</field>
			<field name="arch" type="xml">
				<form string="Course">
					<sheet>
						<h1>
							<field name="course_id"/>
						</h1>
						<group name="info" string="General Information" col="4">
							<label for="semester" string="Semester &#38; Year"/>
							<div>
								<field name="semester" widget="radio"
									attrs="{'readonly': [('id', '!=', False)]}"
									options="{'horizontal': True}" style="width: 65%"/>
								<field name="year" attrs="{'readonly': [('id', '!=', False)]}"
									style="width: 35%"/>
							</div>
							<field name="section_id"
								attrs="{'readonly': [('id', '!=', False)]}"
								domain="[('instructor_id.user_id', '=', uid), ('year', '=', year), ('semester', '=', semester)]" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
							<field name="instructor_id"/>
							<field name="discipline_id"/>
							<field name="timeslot"/>
							<field name="room_id"/>
							<field name="office_hour_ids" widget="many2many_tags"/>
						</group>
						<notebook>
							<page string="Course Description" name="description">
								<group>
									<field name="description" nolabel="1"/>
								</group>
							</page>
							<page string="Course ILOs" name="ilos">
								<group>
									<field name="ilo_ids" nolabel="1">
										<tree>
											<field name="idx_description"/>
										</tree>
									</field>
								</group>
							</page>
							<page string="Textbooks" name="textbooks">
								<group>
									<field name="textbook_ids" nolabel="1">
										<tree>
											<field name="thumbnail" widget="image" class="oe_left oe_avatar"/>
											<field name="name"/>
											<field name="isbn" string="ISBN"/>
											<field name="authors"/>
											<field name="publisher"/>
											<field name="edition"/>
										</tree>
									</field>
								</group>
							</page>
							<page string="Timeline" name="timeline">
								<group>
								</group>
							</page>
							<page string="Assessment Structure" name="assessment">							
								<group>
									<field name="assess_by" style="width: 20%"/>
								</group>
								<group>
									<field name="module_ids" string="Assessment weight per module"
										attrs="{'invisible': [('assess_by', '!=', 'module')]}">
										<tree editable="bottom">
											<field name="name"/>
											<field name="weight" sum="Total Weight"/>
										</tree>
									</field>
									<field name="weighted_technique_ids" string="Assessment weight per technique"
										attrs="{'invisible': [('assess_by', '!=', 'technique')]}">
										<tree editable="bottom">
											<field name="technique_id" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
											<field name="weight" sum="Total Weight"/>
										</tree>
									</field>									
								</group>
								<group col="4">
									<field name="attendance_weight" style="width: 15%"/>
									<label for="attendance_grading" string="Attendance Grading"
										attrs="{'invisible': [('attendance_weight', '=', 0.0)]}"/>
									<div attrs="{'invisible': [('attendance_weight', '=', 0.0)]}">
										<field name="attendance_grading" style="width: 60%"
											attrs="{'required': [('attendance_weight', '>', 0.0)]}"/>
										<![CDATA[&nbsp;]]>
										<field name="absence_limit" style="max-width: 15%"
											attrs="{'invisible': [('attendance_grading', '!=', 'ratez')], 'required': [('attendance_grading', '=', 'ratez')]}"/>
										<field name="penalty_per_absence" style="max-width: 15%"
											attrs="{'invisible': [('attendance_grading', '!=', 'penalty')], 'required': [('attendance_grading', '=', 'penalty')]}"/>
										<![CDATA[&nbsp;]]>
										<span attrs="{'invisible': [('attendance_grading', '!=', 'ratez')]}">Absences</span>
										<span attrs="{'invisible': [('attendance_grading', '!=', 'penalty')]}">%</span>
									</div>
								</group>
								<group>
									<field name="assessment_ids" attrs="{'invisible': [('id', '=', False)]}">
										<tree editable="bottom">
											<field name="name"/>
											<field name="technique_id"/>
											<field name="module_id"/>
											<field name="weight" sum="Total Weight"/>								
										</tree>
									</field>
								</group>
							</page>
						</notebook>
						<group name="details" string="More Details">
							<field name="details" widget="html" nolabel="1"/>
						</group>
						<group name="log" string="Log" col="4">
							<field name="create_uid"/>
							<field name="create_date"/>
							<field name="write_uid"/>
							<field name="write_date"/>
						</group>
					</sheet>
				</form>
			</field>
		</record>
		<record id="view_course_tree" model="ir.ui.view">
			<field name="name">a3lms.course.tree</field>
			<field name="model">a3lms.course</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree string="Courses">
					<field name="name"/>
				</tree>
			</field>
		</record>
		<record id="action_course" model="ir.actions.act_window">
			<field name="name">Courses</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">a3lms.course</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_course_current" model="ir.actions.act_window">
			<field name="name">Current Courses</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">a3lms.course</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('term_id.start_date', '&lt;=', datetime.date.today().strftime('%Y-%m-%d')), ('term_id.end_date', '&gt;=', datetime.date.today().strftime('%Y-%m-%d'))]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_course_past" model="ir.actions.act_window">
			<field name="name">Past Courses</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">a3lms.course</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('term_id.end_date', '&lt;', datetime.date.today().strftime('%Y-%m-%d'))]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_course_form_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="2"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_course_form"/>
			<field name="act_window_id" ref="action_course"/>
		</record>
		<record id="action_course_tree_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_course_tree"/>
			<field name="act_window_id" ref="action_course"/>
		</record>
	</data>
</odoo>