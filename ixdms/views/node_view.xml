<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="view_node_form" model="ir.ui.view">
			<field name="name">ixdms.node.form</field>
			<field name="model">ixdms.node</field>
			<field name="arch" type="xml">
				<form string="Node">
					<sheet>
						<b>
							<field name="type" attrs="{'readonly': [('id', '!=', False)]}" style="width: 15%"/>
						</b>
						<h1>
							<field name="name" default_focus="1" placeholder="Name..." style="width: 50%"/>
						</h1>
						<notebook>
							<page string="Content" name="folder" attrs="{'invisible': [('type', '!=', '1')]}">
								<field name="child_ids" mode="kanban" context="{'default_parent_id': active_id}">
									<kanban>
										<field name="type"/>
										<field name="nfolders"/>
										<field name="ndocuments"/>
										<templates>
											<t t-name="kanban-box">
												<div>
													<div name="content" class="oe_kanban_details">
														<t t-if="record.type.raw_value == '1'">
															<img t-att-src="'/ixdms/static/img/folder.png'"/>
														</t>
														<t t-if="record.type.raw_value == '2'">
															<img t-att-src="'/ixdms/static/img/document.png'"/>
														</t>
														<br/>
														<b>
															<field name="name"/>
														</b>
														<br/>
														<field name="tag_ids" widget="many2many_tags" attrs="{'invisible': [('type', '!=', '2')]}"/>
														<div name="sticks" attrs="{'invisible': [('type', '!=', '1')]}">
															<t t-if="record.nfolders.raw_value &gt; 0 and record.ndocuments.raw_value &gt; 0">
																<t t-if="record.nfolders.raw_value == 1">
																1 Sub-folder, 
																</t>
																<t t-else="">
																	<field name="nfolders"/> Subfolders, 
																</t>
																<t t-if="record.ndocuments.raw_value == 1">
																1 Document 
																</t>
																<t t-else="">
																	<field name="ndocuments"/> Documents
																</t>
															</t>
															<t t-elif="record.nfolders.raw_value &gt; 0">
																<t t-if="record.nfolders.raw_value == 1">
																1 Sub-folder
																</t>
																<t t-else="">
																	<field name="nfolders"/> Subfolders
																</t>
															</t>
															<t t-else="record.ndocuments.raw_value &gt; 0">
																<t t-if="record.ndocuments.raw_value == 1">
																1 Document
																</t>
																<t t-else="">
																	<field name="ndocuments"/> Documents
																</t>
															</t>
															<t t-else="">
																Empty
															</t>
														</div>
														<div name="action" class="oe_kanban_bottom_right">
															<button string="Open" name="open" type="object" class="pull-right text-right oe_highlight"/>
														</div>
													</div>
												</div>
											</t>
										</templates>
									</kanban>
								</field>
							</page>
							<page string="File &#38; URL" name="document" attrs="{'invisible': [('type', '!=', '2')]}">
								<group name="document" col="4">
									<field name="file" widget="binary"/>
									<field name="url" widget="url"/>
								</group>
							</page>
							<page string="Meta-Data" name="metadata">
								<group name="metadata" col="4">									
									<field name="parent_id" domain="[('type', '=', '1')]"
										attrs="{'invisible': [('id', '=', False)]}"
										options="{'no_quick_create': True, 'no_create_edit': True}"/>
									<field name="tag_ids" widget="many2many_tags" attrs="{'invisible': [('type', '!=', '2')]}"/>
								</group>
							</page>
							<page string="Sharing Options" name="share">
								<group name="share" col="4">
									<field name="read_user_ids" widget="many2many_tags" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
									<field name="write_user_ids" widget="many2many_tags" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
									<field name="read_group_ids"
										widget="many2many_tags" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
									<field name="write_group_ids" widget="many2many_tags" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
								</group>
							</page>
						</notebook>
						<group name="log" string="Log" col="4">
							<field name="create_uid"/>
							<field name="create_date"/>
							<field name="write_uid"/>
							<field name="write_date"/>
						</group>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>
		<!-- ixdms.node kanban view -->
		<record id="view_node_kanban" model="ir.ui.view">
			<field name="name">ixdms.node.kanban</field>
			<field name="model">ixdms.node</field>
			<field name="arch" type="xml">
				<kanban string="Folders &#38; Documents">
					<field name="color"/>
					<field name="type"/>
					<templates>
						<t t-name="kanban-box">
							<div t-attf-class="oe_kanban_global_click">
								<div name="content" class="oe_kanban_details">
									<t t-if="record.type.raw_value == '1'">
										<img t-att-src="'/ixdms/static/img/folder.png'"/>
									</t>
									<t t-if="record.type.raw_value == '2'">
										<img t-att-src="'/ixdms/static/img/document.png'"/>
									</t>
									<br/>
									<b>
										<field name="name"/>
									</b>
									<br/>
									<field name="tag_ids" widget="many2many_tags"/>
									<div name="sticks" attrs="{'invisible': [('type', '!=', '1')]}">
										<span t-attf-class="o_form_label #{'label-warning'}" title="Sub-folders">
											<field name="nfolders"/>
										</span>
										<span style="color: green;" title="Documents" class="o_form_label">
											<field name="ndocuments"/>
										</span>
									</div>
									<div name="action" class="oe_kanban_bottom_right">
										<button string="Open" name="open" type="object" class="pull-right text-right oe_highlight"/>
									</div>
								</div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>
		<record id="view_node_tree" model="ir.ui.view">
			<field name="name">ixdms.node.tree</field>
			<field name="model">ixdms.node</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree string="Nodes">
					<field name="name"/>
					<field name="type"/>
				</tree>
			</field>
		</record>
		<record id="action_node" model="ir.actions.act_window">
			<field name="name">Nodes</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">ixdms.node</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('parent_id', '=', False), ('create_uid', '=', uid)]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_node_open" model="ir.actions.act_window">
			<field name="name">Nodes</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">ixdms.node</field>
			<field name="view_mode">form</field>
			<field name="domain">[]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_node_form_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="3"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_node_form"/>
			<field name="act_window_id" ref="action_node"/>
		</record>
		<record id="action_node_tree_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="2"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_node_tree"/>
			<field name="act_window_id" ref="action_node"/>
		</record>
		<record id="action_node_kanban_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">kanban</field>
			<field name="view_id" ref="view_node_kanban"/>
			<field name="act_window_id" ref="action_node"/>
		</record>
	</data>
</odoo>