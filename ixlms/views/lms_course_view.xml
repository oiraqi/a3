<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="view_lms_course_kanban" model="ir.ui.view">
            <field name="name">ixlms.course.kanban</field>
            <field name="model">ixlms.course</field>
            <field name="priority" eval="10"/>
            <field name="arch" type="xml">				
                <kanban>
					<field name="room_id"/>
					<field name="timeslot"/>
                    <templates>                        
                        <t t-name="kanban-box">
                            <div class="oe_module_vignette oe_kanban_global_click">                                
                                <div class="oe_module_desc">
                                    <h2><field name="name"/></h2>
									<field name="instructor_id"/><br/>
									<t t-if="record.timeslot.raw_value">
									<field name="timeslot"/>
									</t>
									<t t-if="record.timeslot.raw_value and record.room_id.raw_value">
									 / 
									</t>
									<t t-if="record.room_id.raw_value">
									<field name="room_id"/>
									</t>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
		<record id="view_lms_course_form" model="ir.ui.view">
			<field name="name">ixlms.course.form</field>
			<field name="model">ixlms.course</field>
			<field name="arch" type="xml">
				<form string="Course">
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="course_id"/>
							</h1>
						</div>
						<div class="oe_button_box" name="button_box">
							<button name="get_modules" type="object" class="oe_stat_button" icon="fa-people-group">
								<field name="nmodules" string="Modules" widget="statinfo"/>
							</button>
							<button name="get_techniques" type="object" class="oe_stat_button" icon="fa-people-group">
								<field name="ntechniques" string="Assess. Techniques" widget="statinfo"/>
							</button>
							<button name="get_channels" type="object" class="oe_stat_button" icon="fa-people-group">
								<field name="nchannels" string="Channels" widget="statinfo"/>
							</button>
							<button name="get_teamsets" type="object" class="oe_stat_button" icon="fa-people-group">
								<field name="nteamsets" string="Teams" widget="statinfo"/>
							</button>
							<button name="get_attendance" type="object" class="oe_stat_button" icon="fa-calendar-check">
								<field name="nattendance_sheets" string="Att. Sheets" widget="statinfo"/>
							</button>
							<button name="get_assessments" type="object" class="oe_stat_button" icon="fa-edit">
								<field name="nassessments" string="Assessments" widget="statinfo"/>
							</button>
							<button name="get_grade_matrix" type="object" class="oe_stat_button" icon="fa-percent">
								<field name="nassessment_lines" string="Grade Matrix" widget="statinfo"/>
							</button>
							<button name="get_students" type="object" class="oe_stat_button" icon="fa-users">
								<field name="nstudents" string="Students" widget="statinfo"/>
							</button>
						</div>
						<group name="info" string="General Information" col="4">
							<label for="semester" string="Semester &#38; Year"/>
							<div>
								<field name="semester" widget="radio" attrs="{'readonly': [('id', '!=', False)]}" options="{'horizontal': True}" style="width: 65%"/>
								<field name="year" attrs="{'readonly': [('id', '!=', False)]}" style="width: 35%"/>
							</div>
							<field name="section_id" attrs="{'readonly': [('id', '!=', False)]}" domain="[('instructor_id.user_id', '=', uid), ('year', '=', year), ('semester', '=', semester)]" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
							<field name="prerequisite_ids" widget="many2many_tags"/>
							<field name="corequisite_ids" widget="many2many_tags"/>
							<field name="timeslot" widget="badge"/>
							<field name="room_id"/>
							<field name="instructor_id"/>
							<field name="office_hour_ids" widget="many2many_tags"/>							
						</group>
						<notebook>
							<page string="Course Description" name="description">
								<group>
									<field name="description" nolabel="1"/>
								</group>
							</page>
							<page string="Course ILOs" name="ilos">
								<group>
									<field name="ilo_ids" nolabel="1">
										<tree>
											<field name="name"/>
											<field name="description"/>
										</tree>
									</field>
								</group>
							</page>
							<page string="Course Content &#38; Organization" name="content" attrs="{'invisible': [('nmodules', '=', 0)]}">								
								<group name="chapters" string="Course Chapters &#38; Timeline">
									<field name="chapter_ids" nolabel="1">
										<tree editable="bottom">											
											<field name="name"/>
											<field name="module_id" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
											<field name="start_date"/>
											<field name="nsessions"/>											
										</tree>
									</field>									
								</group>
							</page>
							<page string="Textbooks" name="textbooks">
								<group>
									<field name="textbook_ids" nolabel="1">
										<tree>
											<field name="thumbnail" widget="image" class="oe_left oe_avatar"/>
											<field name="name"/>
											<field name="isbn" string="ISBN"/>
											<field name="authors"/>
											<field name="publisher"/>
											<field name="edition"/>
										</tree>
									</field>
								</group>
							</page>
							<page string="Assessment Structure" name="assessment" attrs="{'invisible': ['|', ('nmodules', '=', 0), ('ntechniques', '=', 0)]}">
								<group col="4" string="Assessment Grouping &#38; Weighting">
									<field name="grade_grouping" style="width: 50%" string="Grouped by"/>
									<field name="grade_weighting" style="width: 50%" string="Weighted by"/>
								</group>
								<group col="4" string="Course Modules, Assessment Techniques &#38; Weights">
									<field name="module_ids" nolabel="1" readonly="1">
										<tree>											
											<field name="name" string="Course Module"/>
											<field name="percentage" sum="%" attrs="{'column_invisible': [('parent.grade_weighting', '!=', 'percentage')]}"/>
											<field name="points" sum="Points" attrs="{'column_invisible': [('parent.grade_weighting', '!=', 'points')]}"/>
										</tree>
									</field>
									<field name="technique_ids" nolabel="1" readonly="1">
										<tree>
											<field name="sequence" widget="handle"/>
											<field name="technique_id" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
											<field name="percentage" sum="%" attrs="{'column_invisible': [('parent.grade_weighting', '!=', 'percentage')]}"/>
											<field name="points" sum="Points" attrs="{'column_invisible': [('parent.grade_weighting', '!=', 'points')]}"/>
										</tree>
									</field>
								</group>
								<group string="Assessments">
									<field name="assessment_ids" colspan="4" nolabel="1">
										<tree editable="bottom">
											<field name="name" string="Assessment"/>
											<field name="module_id" string="Course Module"
												options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"
												domain="[('id', 'in', module_ids)]"/>
											<field name="technique_id" string="Assessment Technique" domain="[('id', 'in', technique_ids)]" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>											
											<field name="teamwork" widget="boolean_toggle"/>
											<field name="due_time"/>
											<field name="graded"/>
											<field name="percentage" sum="%" string="%" attrs="{'column_invisible': [('parent.grade_weighting', '!=', 'percentage')]}"/>
											<field name="points" sum="Points" attrs="{'column_invisible': [('parent.grade_weighting', '!=', 'points')]}"/>
											<field name="technique_ids" invisible="1"/>
											<field name="module_ids" invisible="1"/>
										</tree>
									</field>									
								</group>								
								<group string="Attendance" col="4">
									<field name="attendance_points" string="Attendance Points" style="width: 10%" attrs="{'invisible': [('grade_weighting', '!=', 'points')]}" colspan="4"/>
									<field name="attendance_percentage" string="Attendance %" style="width: 10%" attrs="{'invisible': [('grade_weighting', '!=', 'percentage')]}" colspan="4"/>
									<label for="attendance_grading" string="Attendance Grading" attrs="{'invisible': [('attendance_weight', '=', 0.0)]}"/>
									<div attrs="{'invisible': [('attendance_weight', '=', 0.0)]}">
										<field name="attendance_grading" style="max-width: 60%" attrs="{'required': [('attendance_weight', '>', 0.0)]}"/>
										<![CDATA[&nbsp;]]>
										<field name="penalty_per_absence" style="max-width: 15%" attrs="{'invisible': [('attendance_grading', '!=', 'penalty')], 'required': [('attendance_grading', '=', 'penalty')]}"/>
										<![CDATA[&nbsp;]]>
										<span attrs="{'invisible': [('attendance_grading', '!=', 'penalty')]}">%</span>
									</div>
									<label for="zero_after_max_abs" string="Zero after" attrs="{'invisible': [('attendance_weight', '=', 0)]}"/>
									<div attrs="{'invisible': [('attendance_weight', '=', 0)]}">
										<field name="zero_after_max_abs" style="width: 20%"/>
										<field name="max_absences" style="width: 10%" attrs="{'invisible': [('zero_after_max_abs', '=', False)],
												'required': [('zero_after_max_abs', '=', True)]}"/>
										<![CDATA[&nbsp;]]>
										<span attrs="{'invisible': [('zero_after_max_abs', '=', False)]}">Absences</span>
									</div>
									<field name="attendance_weight" invisible="1"/>
								</group>								
							</page>							
							<page string="More Details" name="details">
								<group name="details">
									<field name="details" widget="html" nolabel="1"/>
								</group>
							</page>
						</notebook>
						<group name="log" string="Log" col="4">
							<field name="create_uid"/>
							<field name="create_date"/>
							<field name="write_uid"/>
							<field name="write_date"/>
						</group>
					</sheet>
				</form>
			</field>
		</record>
		<record id="view_lms_course_tree" model="ir.ui.view">
			<field name="name">ixlms.course.tree</field>
			<field name="model">ixlms.course</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree string="Courses">
					<field name="name"/>
				</tree>
			</field>
		</record>
		<record id="action_lms_course" model="ir.actions.act_window">
			<field name="name">Courses</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">ixlms.course</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_lms_course_current" model="ir.actions.act_window">
			<field name="name">Current Courses</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">ixlms.course</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('term_id.start_date', '&lt;=', datetime.date.today().strftime('%Y-%m-%d')), ('term_id.end_date', '&gt;=', datetime.date.today().strftime('%Y-%m-%d'))]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_lms_course_past" model="ir.actions.act_window">
			<field name="name">Past Courses</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">ixlms.course</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('term_id.end_date', '&lt;', datetime.date.today().strftime('%Y-%m-%d'))]</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">

				</p>
				<p>

				</p>
			</field>
		</record>
		<record id="action_lms_course_form_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="3"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_lms_course_form"/>
			<field name="act_window_id" ref="action_lms_course"/>
		</record>
		<record id="action_lms_course_tree_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="2"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_lms_course_tree"/>
			<field name="act_window_id" ref="action_lms_course"/>
		</record>
		<record id="action_lms_course_kanban_view" model="ir.actions.act_window.view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">kanban</field>
			<field name="view_id" ref="view_lms_course_kanban"/>
			<field name="act_window_id" ref="action_lms_course"/>
		</record>
	</data>
</odoo>